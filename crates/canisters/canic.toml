# ================================================================
#  CANIC CONFIGURATION
# ================================================================

# ----------------------------------------------------------------
# Global Settings
# ----------------------------------------------------------------
controllers = []
app_directory = ["scale_hub", "shard_hub"]

# ----------------------------------------------------------------
# Standards
# ----------------------------------------------------------------

[standards]
icrc21 = true # Enable ICRC-21 capability

# ----------------------------------------------------------------
# Subnet Definitions
# ----------------------------------------------------------------
# Each subnet defines how its canisters behave and when they top up.
# ----------------------------------------------------------------

# ================================================================
#  PRIME SUBNET
# ================================================================
[subnets.prime]
auto_create = ["app", "auth", "scale_hub", "shard_hub", "test"]
subnet_directory = ["app", "auth", "scale_hub", "shard_hub", "test"]
pool.minimum_size = 3

# --- Root ---
[subnets.prime.canisters.root]
kind = "root"

# --- App ---
[subnets.prime.canisters.app]
kind = "node"

# --- Auth ---
[subnets.prime.canisters.auth]
kind = "node"

# --- Blank ---
[subnets.prime.canisters.blank]
kind = "worker"
[subnets.prime.canisters.blank.scaling]

# --- Scale Hub ---
[subnets.prime.canisters.scale_hub]
kind = "node"
topup.threshold = "10T"
topup.amount = "5T"

# --- Scale Hub Pools ---
[subnets.prime.canisters.scale_hub.scaling.pools.scales]
canister_role = "scale"
policy.min_workers = 2

# --- Scale ---
[subnets.prime.canisters.scale]
kind = "worker"
[subnets.prime.canisters.scale.scaling]

# --- Shard Hub ---
[subnets.prime.canisters.shard_hub]
kind = "node"
topup.threshold = "10T"
topup.amount = "5T"

# --- Shard Hub Pools ---
[subnets.prime.canisters.shard_hub.sharding.pools.shards]
canister_role = "shard"
policy.capacity = 100
policy.max_shards = 4

# --- Shard ---
[subnets.prime.canisters.shard]
kind = "shard"
topup.threshold = "10T"
topup.amount = "5T"
[subnets.prime.canisters.shard.sharding]

# --- Test ---
[subnets.prime.canisters.test]
kind = "node"

# ================================================================
#  GENERAL SUBNET
# ================================================================
[subnets.general]

# --- Blank Canister ---
[subnets.general.canisters.blank]
kind = "worker"
[subnets.general.canisters.blank.scaling]
