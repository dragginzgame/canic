# ================================================================
#  CANIC CONFIGURATION
# ================================================================

# ----------------------------------------------------------------
# Global Settings
# ----------------------------------------------------------------
controllers = []
app_directory = ["scale_hub", "shard_hub"]

# ----------------------------------------------------------------
# Standards
# ----------------------------------------------------------------

[standards]
icrc21 = true # Enable ICRC-21 capability


# ----------------------------------------------------------------
# Subnet Definitions
# ----------------------------------------------------------------
# Each subnet defines how its canisters behave and when they top up.
# ----------------------------------------------------------------

# ================================================================
#  PRIME SUBNET
# ================================================================
[subnets.prime]
auto_create = ["app", "auth", "scale_hub", "shard_hub", "test"]
subnet_directory = ["app", "auth", "scale_hub", "shard_hub", "test"]
pool.minimum_size = 3

# --- Root ---
[subnets.prime.canisters.root]
cardinality = "one"

# --- App ---
[subnets.prime.canisters.app]
cardinality = "one"

# --- Auth ---
[subnets.prime.canisters.auth]
cardinality = "one"

# --- Blank ---
[subnets.prime.canisters.blank]
cardinality = "many"

# --- Scale Hub ---
[subnets.prime.canisters.scale_hub]
cardinality = "one"
topup.threshold = "10T"
topup.amount = "5T"

# --- Scale Hub Pools ---
[subnets.prime.canisters.scale_hub.scaling.pools.scales]
canister_role = "scale"
policy.min_workers = 2

# --- Scale ---
[subnets.prime.canisters.scale]
cardinality = "many"

# --- Shard Hub ---
[subnets.prime.canisters.shard_hub]
cardinality = "one"
topup.threshold = "10T"
topup.amount = "5T"

# --- Shard Hub Pools ---
[subnets.prime.canisters.shard_hub.sharding.pools.shards]
canister_role = "shard"
policy.capacity = 100
policy.max_shards = 4

# --- Shard ---
[subnets.prime.canisters.shard]
cardinality = "many"
topup.threshold = "10T"
topup.amount = "5T"

# --- Test ---
[subnets.prime.canisters.test]
cardinality = "one"

# ================================================================
#  GENERAL SUBNET
# ================================================================
[subnets.general]

# --- Blank Canister ---
[subnets.general.canisters.blank]
cardinality = "many"
